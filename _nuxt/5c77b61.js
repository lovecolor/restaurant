(window.webpackJsonp=window.webpackJsonp||[]).push([[16,8],{388:function(t,e,r){var content=r(394);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(88).default)("58778860",content,!0,{sourceMap:!1})},393:function(t,e,r){"use strict";r(388)},394:function(t,e,r){var n=r(87)(!1);n.push([t.i,".table-card{width:100%;height:300px;display:flex;align-items:center;justify-content:center}.table-text{font-size:50px;font-weight:700}.table-un-delivered{background:#f56c6c}.table-delivered{background:#67c23a}.table-focus{border:5px solid red}",""]),t.exports=n},395:function(t,e,r){"use strict";r.r(e);var n={props:["tables","focus"],methods:{handleClickTable:function(table){this.$emit("clickTable",table)}}},o=(r(393),r(51)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",{staticClass:"p-3",attrs:{gutter:20}},t._l(t.tables,(function(table,e){return r("el-col",{key:table.id||e,attrs:{span:8,xs:24}},[r("div",{on:{click:function(r){return t.handleClickTable(e)}}},[r("el-card",{class:["table-card mb-3",{"table-delivered":!!table.data&&!!table.delivered&&table.delivered},{"table-un-delivered":!!table.data&&!table.delivered},{"table-focus":e===t.focus}],attrs:{"body-style":{padding:"0px"}}},[r("span",{staticClass:"table-text"},[t._v("\n          "+t._s(table.id||e+1)+"\n        ")])])],1)])})),1)}),[],!1,null,null,null);e.default=component.exports},402:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(151);var o=r(184),c=r(114);function l(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||Object(o.a)(t)||Object(c.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},408:function(t,e,r){var content=r(428);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(88).default)("c8c8e1b2",content,!0,{sourceMap:!1})},423:function(t,e,r){"use strict";var n=r(3),o=r(5),c=r(43),l=r(27),d=r(33),f=r(256),h=r(16),v=r(4),y=r(255),m=r(183),w=r(424),x=r(425),C=r(91),_=r(426),O=[],k=o(O.sort),j=o(O.push),S=v((function(){O.sort(void 0)})),T=v((function(){O.sort(null)})),D=m("sort"),A=!v((function(){if(C)return C<70;if(!(w&&w>3)){if(x)return!0;if(_)return _<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)O.push({k:t+r,v:e})}for(O.sort((function(a,b){return b.v-a.v})),r=0;r<O.length;r++)t=O[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:S||!T||!D||!A},{sort:function(t){void 0!==t&&c(t);var e=l(this);if(A)return void 0===t?k(e):k(e,t);var r,n,o=[],v=d(e);for(n=0;n<v;n++)n in e&&j(o,e[n]);for(y(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:h(e)>h(r)?1:-1}}(t)),r=o.length,n=0;n<r;)e[n]=o[n++];for(;n<v;)f(e,n++);return e}})},424:function(t,e,r){var n=r(71).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},425:function(t,e,r){var n=r(71);t.exports=/MSIE|Trident/.test(n)},426:function(t,e,r){var n=r(71).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},427:function(t,e,r){"use strict";r(408)},428:function(t,e,r){var n=r(87)(!1);n.push([t.i,".control-container{width:100vw;height:100vh}.row-top{height:60vh}.row-bot{border-top:1px solid #d3d3d3;height:40vh}.control-container>.el-row>.el-col:first-child{border-right:1px solid #d3d3d3}.btn-view-history-sale{top:0}.el-progress.el-progress--line.el-progress--text-inside{width:50px}",""]),t.exports=n},448:function(t,e,r){"use strict";r.r(e);r(53),r(41),r(89),r(42),r(90);var n=r(402),o=r(39),c=r(2);r(10),r(54),r(423),r(52),r(93),r(17);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={components:{Tables:r(395).default},computed:{currentDate:function(){return(new Date).toLocaleDateString("en-ZA")},currentDateVN:function(){return(new Date).toLocaleDateString("vi")},tableShowing:function(){return this.tables.length>0&&this.tableShowingIndex>=0&&this.tables[this.tableShowingIndex]}},data:function(){return{battery:100,dialogVisible:!1,interval:null,isAuto:null,control:null,tables:[],loading:null,tableShowingIndex:null}},methods:{fetchBattery:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fire.database.ref("mucpin").get();case 2:r=e.sent,(n=r.val())&&(t.battery=n);case 5:case"end":return e.stop()}}),e)})))()},fetchError:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fire.database.ref("error").get();case 2:r=e.sent,n=r.val(),t.dialogVisible=1===n;case 5:case"end":return e.stop()}}),e)})))()},handleChangeControl:function(t){1!==this.isAuto?(this.$fire.database.ref("control").set(t),this.control=t):this.$message.error("Please, change munual mode to apply control!!!")},handleChangeMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$fire.database.ref("isAuto").set(t),1===t&&this.handleChangeControl("STOP"),this.isAuto=t},handleStart:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tableShowing){e.next=4;break}t.$message.error("You haven't choose the table!!!"),e.next=8;break;case 4:return t.$fire.database.ref("tableDelivering").set(t.tableShowing.id),e.next=7,t.$fire.database.ref("tables/".concat(t.tableShowing.id-1,"/delivered")).set(!0);case 7:t.fetchTables();case 8:case"end":return e.stop()}}),e)})))()},handleCheckout:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$fire.database.ref("tables/".concat(t.tableShowing.id-1)).set(""),t.modifyHistorySale(),t.fetchTables();case 3:case"end":return e.stop()}}),e)})))()},modifyHistorySale:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$fire.database.ref("historySales/".concat(t.currentDate)),e.next=3,r.get();case 3:n=e.sent,c=n.val()||{total:0,sum:0,date:t.currentDateVN},l=t.tableShowing.data.reduce((function(t,e){var r;return t=d(d({},t),{},(r={},Object(o.a)(r,e.id,t[e.id]?t[e.id]+e.quantity:e.quantity),Object(o.a)(r,"total",t.total+e.quantity),Object(o.a)(r,"sum",t.sum+e.price),r))}),c),r.set(l);case 7:case"end":return e.stop()}}),e)})))()},handleClickTable:function(table){this.tableShowingIndex=table},startLoading:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},stopLoading:function(){this.loading.close()},fetchTables:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fire.database.ref("tables").get();case 2:r=e.sent,o=r.val(),c=o.map((function(t,e){return d(d({},t),{},{id:e+1})})),t.tables=Object(n.a)(c.filter((function(t){return!!t.data})).sort((function(a,b){return a.createdDate-b.createdDate})));case 6:case"end":return e.stop()}}),e)})))()},fetchControlData:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fire.database.ref("isAuto").get();case 2:return r=e.sent,n=r.val(),t.isAuto=n,e.next=7,t.$fire.database.ref("control").get();case 7:o=e.sent,c=o.val(),t.control=c;case 10:case"end":return e.stop()}}),e)})))()},fetchData:function(){this.fetchTables(),this.fetchError(),this.fetchBattery()}},created:function(){this.fetchControlData(),this.fetchData(),this.interval=setInterval(this.fetchData,5e3)},beforeDestroy:function(){this.interval&&clearInterval(this.interval)}},h=f,v=(r(427),r(51)),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control-container"},[r("div",{staticClass:"d-flex"},[r("span",[t._v("Battery")]),t._v(" "),r("el-progress",{staticClass:"m-1",attrs:{"stroke-width":20,percentage:t.battery,status:t.battery<20?"exception":t.battery<50?"warning":"success","text-inside":!0}})],1),t._v(" "),r("el-dialog",{attrs:{visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-result",{attrs:{icon:"error",title:"Error"}})],1),t._v(" "),r("el-row",{staticClass:"row-top"},[r("el-col",{staticClass:"h-100",attrs:{span:15}},[r("tables",{attrs:{focus:t.tableShowingIndex,tables:t.tables},on:{clickTable:t.handleClickTable}})],1),t._v(" "),r("el-col",{staticClass:"h-100 overflow-auto",attrs:{span:9}},[t.tableShowing?r("div",{staticClass:"d-flex align-items-center m-3 flex-column"},[r("h3",[t._v("Table "+t._s(t.tableShowing.id))]),t._v(" "),r("div",[t._v("\n          "+t._s(new Date(t.tableShowing.createdDate).toLocaleTimeString())+"\n        ")])]):t._e(),t._v(" "),t.tableShowing?r("el-table",{staticStyle:{width:"100%"},attrs:{height:"250",data:t.tableShowing.data||[],border:"","show-summary":""}},[r("el-table-column",{attrs:{prop:"name",label:"Name"}}),t._v(" "),r("el-table-column",{attrs:{prop:"quantity",label:"Quantity"}})],1):t._e(),t._v(" "),r("div",{staticClass:"d-flex justify-content-center mt-3"},[t.tableShowing?r("el-button",{attrs:{type:"primary"},on:{click:t.handleCheckout}},[t._v("CHECKOUT")]):t._e()],1)],1)],1),t._v(" "),r("el-row",{staticClass:"row-bot"},[r("el-col",{staticClass:"d-flex flex-column justify-content-center h-100",attrs:{span:12}},[r("div",{staticClass:"d-flex justify-content-center"},[r("el-button",{attrs:{type:"GO"===t.control?"danger":"primary"},on:{click:function(e){return t.handleChangeControl("GO")}}},[t._v("GO")])],1),t._v(" "),r("div",{staticClass:"pl-3 my-3 d-flex justify-content-center"},[r("el-button",{attrs:{type:"LEFT"===t.control?"danger":"primary"},on:{click:function(e){return t.handleChangeControl("LEFT")}}},[t._v("LEFT")]),r("el-button",{attrs:{type:"info",circle:""},on:{click:function(e){return t.handleChangeControl("STOP")}}},[t._v("O")]),r("el-button",{attrs:{type:"RIGHT"===t.control?"danger":"primary"},on:{click:function(e){return t.handleChangeControl("RIGHT")}}},[t._v("RIGHT")])],1),t._v(" "),r("div",{staticClass:"d-flex justify-content-center"},[r("el-button",{attrs:{type:"BACK"===t.control?"danger":"primary"},on:{click:function(e){return t.handleChangeControl("BACK")}}},[t._v("BACK")])],1)]),t._v(" "),r("el-col",{staticClass:"h-100 d-flex flex-column justify-content-center position-relative",attrs:{span:12}},[r("div",{staticClass:"btn-view-history-sale d-flex justify-content-end position-absolute w-100 p-3"},[r("nuxt-link",{attrs:{to:"/history-sale"}},[r("el-button",{attrs:{icon:"el-icon-view",round:"",type:"primary"}},[t._v("View History Sale")])],1)],1),t._v(" "),r("div",{staticClass:"d-flex justify-content-center mb-3"},[r("el-button",{attrs:{type:"primary",round:""},on:{click:t.handleStart}},[t._v("START")])],1),t._v(" "),r("div",{staticClass:"d-flex justify-content-center"},[r("el-button",{attrs:{type:1===t.isAuto?"danger":"primary",round:""},on:{click:function(e){return t.handleChangeMode(1)}}},[t._v("AUTO")]),t._v(" "),r("el-button",{attrs:{type:0===t.isAuto?"danger":"primary",round:""},on:{click:function(e){return t.handleChangeMode(0)}}},[t._v("MANUAL")])],1)])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Tables:r(395).default})}}]);